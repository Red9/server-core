<script>
    $(document).ready(function() {
        var eventTree = "{{{dataset.event_tree}}}";

        // Dynamically load snippets.
        var event_tree_url = "/snippet/eventtree?id=" + eventTree;
        $("#insert_event_tree").load(event_tree_url);


        $("#delete").click(function() {
            $.ajax(
                    "/api/dataset/{{dataset.id}}",
                    {type: "delete"}
            ).done(function() {
                window.location.replace('/');
            }
            ).fail(function() {
                alert("Internal Error: could not delete dataset. Please notify a sysadmin.");
            });
        });
    });

</script>

<div class="row">
    <div class="col-xs-6">
        <h3>Summary</h3>
    </div>

    <div class="col-xs-6">
        <div id="delete"> <h3><a class="btn btn-xs btn-danger pull-right">Delete Dataset</a></h3></div>
        <h3><a class="btn btn-default btn-xs pull-right" href="/event/{{dataset.event_tree}}">View Maps and Graphs</a></h3>
        
    </div>
</div>


<table cellpadding="3" cellspacing="3" class="table table-striped">
    <tr>
        <td><b>Dataset Title</b>
        </td>
        <td>{{{dataset.name}}}</td>
    </tr>
    <tr>
        <td><b>Created</b>
        </td>
        <td>{{{dataset.create_time}}}</td>
    </tr>
    <tr>
        <td><b>Submit User</b>
        </td>
        <td><a href="/user/{{dataset.create_user.id}}">{{{dataset.create_user.display_name}}}</a>
        </td>
    </tr>
    <tr>
        <td><b>Start Time</b>
        </td>
        <td>{{{dataset.start_time}}}</td>
    </tr>
    <tr>
        <td><b>End Time</b>
        </td>
        <td>{{{dataset.end_time}}}</td>
    </tr>
    <tr>
        <td><b>Duration</b>
        </td>
        <td>{{{dataset.duration}}}</td>
    </tr>
    <tr>
        <td><b>Submitted Filename</b>
        </td>
        <td>{{{dataset.filename}}}</td>
    </tr>
    <tr>
        <td><b>Number of Rows</b>
        </td>
        <td>{{{dataset.number_rows}}}</td>
    </tr>
    <tr>
        <td><b>SCAD Unit</b>
        </td>
        <td>{{{dataset.scad_unit}}}</td>
    </tr>
</table>

<hr>
<div id="insert_event_tree"> <!--Loaded by jQuery--> </div>
<hr>


<h3> Download:
    <a download="{{dataset.id}}-panel.csv" href="/api/dataset/{{dataset.id}}?minmax=false">Complete Panel</a>
    ~ <a href="/dataset/{{dataset.id}}/download">Custom Panel</a>
</h3>

<h5>Download Sensors: <a download="{{dataset.id}}-accl.csv" target="_blank" href="/api/dataset/{{dataset.id}}?columns=acceleration:x,acceleration:y,acceleration:z&minmax=false">Accelerometer</a>
    ~ <a download="{{dataset.id}}-gyro.csv" target="_blank" href="/api/dataset/{{dataset.id}}?columns=rotationrate:x,rotationrate:y,rotationrate:z&minmax=false">Gyroscope</a>
    ~ <a download="{{dataset.id}}-magn.csv" target="_blank" href="/api/dataset/{{dataset.id}}?columns=magneticfield:x,magneticfield:y,magneticfield:z&minmax=false">Magnetometer</a>
    ~ <a download="{{dataset.id}}-baro.csv" target="_blank" href="/api/dataset/{{dataset.id}}?columns=pressure:pressure&minmax=false">Barometer</a>
    ~ <a download="{{dataset.id}}-temp.csv" target="_blank" href="/api/dataset/{{dataset.id}}?columns=pressure:temperature&minmax=false">Temperature</a>
    ~ <a download="{{dataset.id}}-gps.csv" target="_blank" href="/api/dataset/{{dataset.id}}?columns=gps:latitude,gps:longitude&minmax=false">GPS</a>

</h5>

<hr>

<h2>Summary Statistics</h2>
<pre><code>

{{{dataset.summary_statistics}}}

</code></pre>
<h2>Processing Notes</h2>
<pre><code>

{{{dataset.processing_notes}}}

</code></pre>
<h2>Processing Statistics</h2>
<pre><code>

{{{dataset.processing_statistics}}}

</code></pre>
<h2>Processing Configuration</h2>
<pre><code>

{{{dataset.processing_config}}}

</code>

</pre>
<br />
<br /> <b>Dataset UUID: </b> {{dataset.id}}
<br /> <b>Raw Data UUID: </b> {{dataset.raw_data}}
<br />

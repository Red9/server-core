var path = '../lib/index.js';

var config = {
    dataPath: '/home/clewis/consulting/red9/data-processing/rncvalidate',
    command: '/home/clewis/consulting/red9/data-processing/rncvalidate/build/rncvalidate'
};

exports['test basic functionality'] = {
    setUp: function (callback) {
        this.sut = require(path).panelReader(config).readPanelCSV;
        callback();
    },
    'basic': function (test) {

        var stream = this.sut('B39F36');

        test.expect(2);
        gotData = false;

        stream.on('data', function (data) {
            if (!gotData) {
                test.notEqual(data, null);
                gotData = true;
            }
        });
        stream.on('error', function (err) {
            test.ok(false); // Force error
        });
        stream.on('end', function () {
            test.ok(true);
            test.done();
        });
    }
};